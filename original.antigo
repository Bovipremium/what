<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Abrindo WhatsApp...</title>

  <style>
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0b0b0b;color:#fff}
    .wrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:24px;text-align:center}
    .card{max-width:520px;width:100%;background:rgba(0,0,0,.7);border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.4)}
    h1{margin:0 0 8px;font-size:22px}
    p{margin:6px 0 16px;opacity:.9}
    .btn{display:inline-block;background:#25D366;color:#fff;text-decoration:none;
         padding:14px 24px;border-radius:999px;font-weight:700;box-shadow:0 4px 12px rgba(0,0,0,.35)}
    .hint{margin-top:10px;font-size:12px;opacity:.75}
    #fallback{display:none}
  </style>

  <!-- Meta Pixel (substitua SEU_PIXEL_ID) -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src='https://connect.facebook.net/en_US/fbevents.js';s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script');
    fbq('init','SEU_PIXEL_ID');           // <-- troque aqui
    fbq('track','PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=SEU_PIXEL_ID&ev=PageView&noscript=1"/></noscript>
</head>
<body>

  <div class="wrap">
    <div class="card">
      <h1>Abrindo o WhatsApp...</h1>
      <p>Se não abrir automaticamente, toque no botão abaixo.</p>

      <div id="fallback">
        <a id="openWeb" class="btn" target="_blank" rel="noopener">Abrir no WhatsApp</a>
        <div class="hint">Atendimento direto no WhatsApp.</div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const phone = "5562993463712";
      const msg   = "Olá, gostaria de saber mais informações!!";
      const enc   = encodeURIComponent(msg);

      const appLink = `whatsapp://send?phone=${phone}&text=${enc}`; // app
      const webLink = `https://wa.me/${phone}?text=${enc}`;         // fallback universal

      // 1) registramos a TENTATIVA (útil p/ diagnóstico/otimização inicial)
      if (window.fbq) fbq('trackCustom','WhatsAppAttempt');

      // 2) tentamos abrir o app
      window.location.href = appLink;

      // 3) após 900ms, mostramos o botão de fallback (caso o app não tenha aberto)
      setTimeout(function(){
        const fb = document.getElementById('fallback');
        const a  = document.getElementById('openWeb');
        a.href   = webLink;
        fb.style.display = 'block';
      }, 900);

      // 4) hard fallback: se a aba continuar visível, forçamos o wa.me
      setTimeout(function(){
        if (!document.hidden) window.location.href = webLink;
      }, 1600);

      // 5) quando a pessoa clica no botão, marcamos "Contact"
      document.getElementById('openWeb').addEventListener('click', function(){
        if (window.fbq) fbq('track','Contact', {content_name: 'WhatsApp Button'});
      });
    });
  </script>
</body>
</html>
